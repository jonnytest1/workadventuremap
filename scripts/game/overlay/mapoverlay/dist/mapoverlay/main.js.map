{"version":3,"sources":["./src/app/api-service.ts","./src/app/friends/friends.component.html","./src/app/friends/friends.component.ts","./src/app/speech-recognition-service.ts","./src/environments/environment.ts","./src/app/inventar/inventar.component.ts","./src/app/inventar/inventar.component.html","./src/app/shared-service.ts","./src/app/app.routes.ts","./src/vector.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/inventar/inentory-items.ts","./src/app/app.module.ts","./src/app/miro/miro.component.ts","./src/app/miro/miro.component.html","./src/app/inventar/vector.ts","./src/app/health/health.component.ts","./src/app/health/health.component.html","./src/main.ts","./$_lazy_route_resource lazy namespace object"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Subject } from 'rxjs';\r\nimport type { FeMessage, RoomMap, UnPromise } from './backend';\r\nimport type { HasMovedEvent, WAMAp } from './waapi';\r\n\r\n\r\n\r\nfunction uuidv4(): string {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\r\n        const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n        return v.toString(16);\r\n    });\r\n}\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class ApiService {\r\n\r\n    private passThroughResponseMap: { [uuid: string]: (arg: any) => void } = {};\r\n    private apiResponseMethod: { [uuid: string]: (arg: any) => void } = {};\r\n    // private messageMap: { [uuid: string]: (arg: any) => void } = {};\r\n\r\n    private _userPositions = new Subject<RoomMap[string][\"users\"]>()\r\n\r\n    public userPositions = this._userPositions.asObservable()\r\n\r\n    private _passedEvents = new Subject<KeyboardEvent>()\r\n\r\n    public passedEvents = this._passedEvents.asObservable()\r\n\r\n    private _playerPosition = new BehaviorSubject<HasMovedEvent>(undefined);\r\n\r\n    public playerPostion = this._playerPosition.asObservable()\r\n\r\n    constructor() {\r\n        window.addEventListener('message', messageEvent => {\r\n            if (messageEvent.data.type === 'passthroughresponse') {\r\n                this.passThroughResponseMap[messageEvent.data.uuid](messageEvent.data.data);\r\n                delete this.passThroughResponseMap[messageEvent.data.uuid];\r\n            } else if (messageEvent.data.type === 'apicallresponse') {\r\n                this.apiResponseMethod[messageEvent.data.uuid](messageEvent.data.data);\r\n                delete this.apiResponseMethod[messageEvent.data.uuid];\r\n            } else if (messageEvent.data.type == \"positionUpdate\") {\r\n                this._userPositions.next(messageEvent.data.data)\r\n            } else if (messageEvent.data.type == \"event-pass\") {\r\n                this._passedEvents.next(messageEvent.data.data)\r\n            } else if (messageEvent.data.type == \"movementpassthrough\") {\r\n                this._playerPosition.next(messageEvent.data.data)\r\n            }\r\n        });\r\n    }\r\n\r\n    async passThrough<T extends keyof FeMessage>(event: { type: T, data?: FeMessage[T]['param'] }): Promise<UnPromise<FeMessage[T]['response']>> {\r\n        return new Promise<UnPromise<FeMessage[T]['response']>>((res, thr) => {\r\n            const uuid = uuidv4();\r\n            this.passThroughResponseMap[uuid] = res;\r\n            window.parent.postMessage({\r\n                type: 'passthrough',\r\n                uuid,\r\n                data: event\r\n            }, '*');\r\n        });\r\n    }\r\n    async WAApi<T extends keyof WAMAp>(\r\n        eventMethod: T, ...args: Parameters<WAMAp[T]>): Promise<UnPromise<ReturnType<WAMAp[T]>>> {\r\n        return new Promise<UnPromise<ReturnType<WAMAp[T]>>>((res, thr) => {\r\n            const uuid = uuidv4();\r\n            this.apiResponseMethod[uuid] = res;\r\n\r\n            window.parent.postMessage({\r\n                type: 'apicall',\r\n                method: eventMethod,\r\n                uuid,\r\n                arguments: args\r\n            }, '*');\r\n        });\r\n    }\r\n\r\n}\r\n","<ng-container *ngIf=\"userData$|async let userData\">\n\n  you died {{ userData.deathCount }} times so far <br>\n\n  <mat-checkbox [(ngModel)]=\"showAllUsers\"\n                *ngIf=\"userData.isAdmin\"\n                (ngModelChange)=\"refreshFriends()\">show all</mat-checkbox> <br>\n  <button *ngIf=\"userData.isAdmin\"\n          mat-button\n          (click)=\"messageGlobal()\">message global</button>\n\n  <button mat-button\n          (click)=\"refreshFriends()\">refresh</button>\n  <table>\n    <tr>\n      <th class=\"friendIndex\">\n        Friend Index\n      </th>\n      <th>\n        Name\n      </th>\n      <th>\n        Status\n      </th>\n      <th>\n        Room\n      </th>\n    </tr>\n\n    <tr *ngFor=\"let friend of userData.friends | keyvalue: sortFriends\">\n      <td class=\"friendIndex\">{{friend.value.index}}</td>\n      <td>{{friend.key}}</td>\n      <td>{{friend.value.status}}</td>\n\n      <ng-container *ngIf=\"friend.value.status=='online'\">\n        <td>{{getRoom(friend.value)}}</td>\n        <td>\n          <button mat-button\n                  (click)=\"messageFriend(friend.value)\">message</button>\n          <button mat-button\n                  *ngIf=\"!userData.trackedUser\"\n                  (click)=\"visitFriend(friend.value)\">visit</button>\n          <button mat-button\n                  *ngIf=\"userData.trackedUser\"\n                  (click)=\"untrack()\">untrack</button>\n        </td>\n      </ng-container>\n\n    </tr>\n  </table>\n</ng-container>","import { KeyValue } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ApiService } from '../api-service';\nimport { FeMessage, UnPromise, UserData } from '../backend';\nimport { SharedService } from '../shared-service';\n\ntype Friend = UnPromise<FeMessage['getUserData']['response']>['friends']['key'];\n\n@Component({\n  selector: 'app-friends',\n  templateUrl: './friends.component.html',\n  styleUrls: ['./friends.component.less']\n})\nexport class FriendsComponent implements OnInit {\n\n  userData$: Observable<UserData>;\n  showAllUsers: boolean\n  constructor(private apiService: ApiService, private sharedService: SharedService) {\n    this.userData$ = sharedService.userData\n  }\n\n  loadUserData() {\n    this.sharedService.loadUserData();\n  }\n\n  ngOnInit() {\n\n  }\n\n  debug<T>(obj: T): T {\n    return obj\n  }\n\n  getRoom(friend: Friend) {\n    const roomParts = friend.room.split('/');\n    const currentMap = roomParts.pop();\n    const domain = roomParts[2];\n    let roomStr = `${domain}-${currentMap} `\n    if (friend.jitsiRoom && friend.jitsiRoom !== 'invalidmapref') {\n      roomStr += ` in ${friend.jitsiRoom}`;\n    }\n\n    return roomStr\n  }\n\n  sortFriends(friend: KeyValue<string, Friend>, friend2: KeyValue<string, Friend>) {\n    return friend.value.index - friend2.value.index\n  }\n\n  refreshFriends() {\n    this.sharedService.refreshFriends(this.showAllUsers);\n  }\n\n  messageFriend(friend: Friend) {\n    const message = prompt('message');\n    this.apiService.passThrough({\n      type: 'chatmessage',\n      data: {\n        message: `${friend.index} ${message}`\n      }\n    });\n  }\n  async untrack() {\n    this.sharedService.update({ trackedUser: null })\n  }\n  async visitFriend(friend: Friend) {\n    this.sharedService.update({ trackedUser: friend.referenceUuid })\n    const gameState = await this.apiService.WAApi(\"getGameState\")\n    if (friend.room !== gameState.roomId) {\n      const friendInfo = await this.apiService.passThrough({\n        type: 'friendstatus'\n      });\n      for (let friendName in friendInfo) {\n        if (friendInfo[friendName].index === friend.index) {\n          this.apiService.WAApi(\"goToRoom\", `/${friendInfo[friendName].room}`)\n          return;\n        }\n      }\n    }\n\n  }\n\n  messageGlobal() {\n    const message = prompt('message');\n    this.apiService.passThrough({\n      type: 'chatmessage',\n      data: {\n        message: `global ${message}`\n      }\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { ApiService } from './api-service';\r\n\r\n@Injectable({\r\n    providedIn: \"root\"\r\n})\r\nexport class SpeechRecognitionService {\r\n    recognition: SpeechRecognition;\r\n\r\n\r\n    constructor(private apiService: ApiService) {\r\n        //@ts-ignore\r\n        var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;\r\n        //@ts-ignore\r\n        var SpeechGrammarList = SpeechGrammarList || webkitSpeechGrammarList;\r\n        //@ts-ignore\r\n        var SpeechRecognitionEvent = SpeechRecognitionEvent || webkitSpeechRecognitionEvent;\r\n\r\n        this.recognition = new SpeechRecognition();\r\n        this.recognition.lang = 'de'; //Sprache auf Deutsch festlegen\r\n\r\n        var speechRecognitionList = new SpeechGrammarList();\r\n        speechRecognitionList.addFromString('Brandad Systems', 1);\r\n        this.recognition.grammars = speechRecognitionList;\r\n        this.recognition.continuous = true;\r\n        this.recognition.onresult = function (event) {\r\n            if (event.results.length > 0) {\r\n                if (event.results[0][0].transcript.toLocaleLowerCase() == \"Brandad Systems\".toLocaleLowerCase()) {\r\n                    apiService.WAApi(\"goToRoom\", \"/_/global/brandad-systems.github.io/workadventure-maps/openbas.json\")\r\n                }\r\n                var utterance = new SpeechSynthesisUtterance(event.results[0][0].transcript);\r\n                utterance.lang = 'de'; //Sprache auf Deutsch festlegen\r\n                speechSynthesis.speak(utterance);\r\n            }\r\n        };\r\n        this.recognition.onerror = function (event) {\r\n            console.error(event.error)\r\n            // debugger;\r\n        };\r\n        this.recognition.onnomatch = function (event) {\r\n            debugger;\r\n        };\r\n\r\n        this.recognition.onspeechend = function () {\r\n            debugger;\r\n        };\r\n\r\n    }\r\n\r\n    start() {\r\n        this.recognition.start();\r\n    }\r\n}","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  mapServerOrigin: \"pi4.e6azumuvyiabvs9s.myfritz.net\"\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { ChangeDetectorRef, Component, ElementRef, Input, OnInit, ViewChild } from '@angular/core';\nimport { take } from 'rxjs/internal/operators';\nimport { environment } from '../../environments/environment';\nimport { ApiService } from '../api-service';\nimport { FeInventoryItem } from '../backend';\nimport { InventoryItemType, inventoryTypeMap } from './inentory-items';\nimport { Vector2 } from './vector';\n\n\ninterface Pixel {\n  red: number;\n  green: number;\n  blue: number;\n  alpha: number;\n  x: number\n  y: number\n}\n\n\n@Component({\n  selector: 'app-inventar',\n  templateUrl: './inventar.component.html',\n  styleUrls: ['./inventar.component.less']\n})\nexport class InventarComponent implements OnInit {\n\n  @Input()\n  inventory: Array<FeInventoryItem> = []\n\n  @ViewChild(\"canvas\")\n  canvas: ElementRef<HTMLCanvasElement> | null = null\n  context: CanvasRenderingContext2D | null = null;\n\n  menuItem: FeInventoryItem = null\n  activeIndex = 0;\n  inventoryMap = inventoryTypeMap\n\n  menuRef: HTMLDialogElement\n\n  menuTopLeftPosition = { x: '0', y: '0' }\n\n  tileImage: { [index: string]: { imageEl: HTMLImageElement, loaded?: boolean } } = {}\n\n  onClick = (event) => {\n    if (!event.composedPath().some(ev => (ev as HTMLElement).id == \"inventoryItemDialog\")) {\n      this.removeMenu()\n    }\n  }\n\n\n  constructor(private cdr: ChangeDetectorRef, private apiService: ApiService) { }\n\n  setActiveIndex(index: number) {\n    this.activeIndex = index\n    this.draw()\n  }\n\n  getInventoryItem(type: InventoryItemType) {\n    return this.inventoryMap[type]\n  }\n\n  getImageSource(item: FeInventoryItem): string {\n    if (item.itemType == InventoryItemType.Random) {\n      return item.src = `assets/img/${inventoryTypeMap[item.itemType].image}.svg`\n    } else if (item.itemType == InventoryItemType.Tile) {\n      const imageSource = `https://${environment.mapServerOrigin}/mapserver/rest/mapserver/usermap/assets/control.png`\n      if (!this.tileImage[imageSource]) {\n        this.tileImage[imageSource] = {\n          loaded: false,\n          imageEl: document.getElementById(\"tileImageRendererSource\") as HTMLImageElement\n        }\n        this.tileImage[imageSource].imageEl.src = imageSource\n        this.tileImage[imageSource].imageEl.onload = () => {\n          this.tileImage[imageSource].loaded = true\n          this.cdr.detectChanges()\n        }\n        this.tileImage[imageSource].imageEl.onerror = () => {\n          debugger;\n        }\n      }\n      if (this.tileImage[imageSource].loaded) {\n        try {\n          const renderCanvas = document.getElementById(\"tileImageRenderer\") as HTMLCanvasElement;\n          renderCanvas.height = 32\n          renderCanvas.width = 32\n          const context = renderCanvas.getContext(\"2d\");\n\n          const zeroBasedIndex = item.index - 1\n          const imageTilePerRow = this.tileImage[imageSource].imageEl.width / 32;\n          const x = zeroBasedIndex % (imageTilePerRow)\n          const y = Math.floor(zeroBasedIndex / imageTilePerRow)\n          context.clearRect(0, 0, 32, 32)\n          context.drawImage(this.tileImage[imageSource].imageEl, -x * 32, -y * 32)\n          item.src = renderCanvas.toDataURL()\n          this.cdr.detectChanges()\n        } catch (e) {\n          debugger;\n        }\n      }\n    }\n\n  }\n  ngAfterViewInit(): void {\n    this.context = this.canvas?.nativeElement.getContext(\"2d\") || null\n    this.draw();\n\n  }\n\n  openContextMenu(event: MouseEvent, item: FeInventoryItem) {\n    event.preventDefault()\n    this.menuItem = item\n\n    if (!this.menuRef) {\n      this.menuRef = document.getElementById('inventoryItemDialog') as HTMLDialogElement\n    }\n    this.menuRef.style.display = 'initial';\n    this.menuRef.style.position = 'fixed';\n    this.menuRef.style.margin = \"0px\"\n    this.menuRef.style.padding = \"0px\"\n    this.menuRef.style.border = \"0px\"\n    this.menuRef.style.left = event.pageX + 'px';\n\n    this.menuRef.style.top = event.pageY + 'px';\n    this.menuRef.style.transform = \"translateY(-100%)\";\n    this.menuRef.style.display = \"initial\"\n    this.menuRef.show()\n\n\n    window.parent.focus()\n    window.addEventListener(\"click\", this.onClick)\n\n\n  }\n\n  removeMenu() {\n    this.menuRef.close(\"false\")\n    this.menuRef.style.display = \"none\"\n    this.cdr.detectChanges();\n    window.removeEventListener(\"click\", this.onClick)\n  }\n\n  async preview(item: FeInventoryItem) {\n    const position = await this.apiService.playerPostion.pipe(take(1)).toPromise()\n    if (position == undefined) {\n      return;\n    }\n    let tiledPosition = {\n      x: Math.floor(position.x / 32),\n      y: Math.floor(position.y / 32)\n    };\n    this.apiService.WAApi(\"updateTile\", [{\n      ...tiledPosition,\n      tile: item.index,\n      layer: \"background-image\"\n    }])\n  }\n\n  async activationClick(item: FeInventoryItem) {\n    let tiledPosition = null\n    if (item.itemType == InventoryItemType.Tile) {\n      const position = await this.apiService.playerPostion.pipe(take(1)).toPromise()\n      if (position == undefined) {\n        return;\n      }\n      tiledPosition = {\n        x: Math.floor(position.x / 32),\n        y: Math.floor(position.y / 32)\n      };\n    }\n\n\n    const newItem = await this.apiService.passThrough({\n      type: \"activateItem\",\n      data: {\n        item: item.id,\n        position: tiledPosition\n      }\n    })\n    this.inventory.splice(this.inventory.findIndex(iitem => iitem.id == item.id), 1, ...newItem)\n    if (item.itemType == InventoryItemType.Tile) {\n      this.apiService.WAApi(\"updateTile\", [{\n        ...tiledPosition,\n        tile: item.index,\n        layer: \"background-image\"\n      }])\n    }\n    this.removeMenu()\n  }\n  private draw() {\n    this.map((pixel, height, width) => {\n      const gridPos = pixel.x % 50 == 0 || pixel.y % 50 == 0;\n      const borderPos = pixel.x == width - 1 || pixel.y == height - 1;\n\n      const x = Math.floor(pixel.x / 50);\n      const y = Math.floor(pixel.y / 50);\n      const activeIndex = y * 16 + x === this.activeIndex;\n      return {\n        ...pixel,\n        alpha: (gridPos || borderPos || activeIndex) ? 256 : 20,\n        blue: 256,\n        red: 256,\n        green: 256\n      };\n    });\n  }\n\n  getPixel(image: ImageData, pos: Vector2) {\n    const index = pos.y * (image.width * 4) + pos.x * 4;\n    return {\n      red: image.data[index],\n      green: image.data[index + 1],\n      blue: image.data[index + 2],\n      alpha: image.data[index + 3],\n      x: pos.x,\n      y: pos.y\n    };\n  }\n  get rect() {\n    const rect = this.getRect();\n    if (!rect) {\n      return null\n    }\n    return new Vector2(rect.width, rect.height);\n  }\n\n  getRect() {\n    return this.canvas?.nativeElement.getBoundingClientRect();\n  }\n\n  getImageData(from?: Vector2, to?: Vector2) {\n    if (!from) {\n      from = Vector2.ZERO;\n    }\n    let toVector: Vector2\n    if (!to && this.rect) {\n      toVector = this.rect;\n    } else {\n      toVector = to as Vector2\n    }\n    const newLocal = toVector.sub(from);\n    return this.context.getImageData(from.x, from.y, newLocal.x, newLocal.y);\n  }\n\n  map(fnc: (pixel: Pixel, height: number, width: number) => Pixel, options: { from?: Vector2, to?: Vector2 } = {}) {\n    const imageData = this.getImageData();\n\n    let start = Vector2.ZERO;\n    if (options.from) {\n      start = options.from.round();\n    }\n\n    let end = this.rect;\n    if (options.to) {\n      end = options.to;\n    }\n\n    end = end.limit(this.rect.round());\n\n    for (let x = start.x; x < end.x; x++) {\n      for (let y = start.y; y < end.y; y++) {\n        const index = y * (imageData.width * 4) + x * 4;\n\n        const rgba = fnc({\n          red: imageData.data[index],\n          green: imageData.data[index + 1],\n          blue: imageData.data[index + 2],\n          alpha: imageData.data[index + 3],\n          x: x,\n          y: y\n        }, imageData.height, imageData.width);\n        if (rgba) {\n          imageData.data[index] = rgba.red;\n          imageData.data[index + 1] = rgba.green;\n          imageData.data[index + 2] = rgba.blue;\n          imageData.data[index + 3] = rgba.alpha;\n        } else {\n          debugger;\n        }\n      }\n    }\n    this.putImageData(imageData);\n    return this.canvas;\n\n  }\n  putImageData(imageData: ImageData, pos?: Vector2) {\n    if (!pos) {\n      pos = Vector2.ZERO;\n    }\n    this.context.putImageData(imageData, pos.x, pos.y);\n  }\n\n\n  ngOnInit() {\n  }\n\n}\n","<canvas #canvas\n        width=\"800px\"\n        height=\"200px\">\n</canvas>\n\n\n<div id=\"inventoryGridContainer\">\n        <ng-container *ngFor=\"let item of inventory;let index=index\">\n                <img *ngIf=\"(!!item.src)||getImageSource(item)\"\n                     width=\"40px\"\n                     height=\"40px\"\n                     (click)=\"setActiveIndex(index)\"\n                     [title]=\"inventoryMap[item.itemType].title\"\n                     (contextmenu)=\"openContextMenu($event,item)\"\n                     [src]=\"item.src\" />\n        </ng-container>\n\n</div>\n<dialog id=\"inventoryItemDialog\">\n        <ng-container *ngIf=\"menuItem\">\n\n                <button mat-button\n                        (click)=\"activationClick(menuItem)\">\n                        {{ getInventoryItem(menuItem.itemType).activationText }}\n                </button>\n                <br>\n                <button mat-button\n                        *ngIf=\"menuItem.itemType==1\"\n                        (click)=\"preview(menuItem)\">\n                        preview placement\n                </button>\n        </ng-container>\n\n</dialog>\n\n\n<img id=\"tileImageRendererSource\"\n     crossorigin=\"anonymous\"\n     style=\"position: absolute;display: none;\">\n\n<canvas id=\"tileImageRenderer\"\n        style=\"position: absolute;display: none;\">\n\n</canvas>","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { ApiService } from './api-service';\r\nimport { GameState, UserData } from './backend';\r\n\r\n@Injectable({\r\n    providedIn: 'root',\r\n})\r\nexport class SharedService {\r\n\r\n\r\n    private _userData = new BehaviorSubject<UserData>(undefined)\r\n\r\n    public userData = this._userData.asObservable()\r\n    gameState$ = new BehaviorSubject<GameState>(undefined);\r\n\r\n    constructor(private apiService: ApiService) {\r\n        this.loadUserData()\r\n        this.apiService.WAApi(\"getGameState\").then(state => {\r\n            this.gameState$.next(state)\r\n        })\r\n    }\r\n\r\n    public async loadUserData() {\r\n        let userData = await this.apiService.passThrough({\r\n            type: 'getUserData'\r\n        })\r\n        this._userData.next(userData)\r\n    }\r\n\r\n    async refreshFriends(allUsers = false) {\r\n        const newFriends = await this.apiService.passThrough({\r\n            type: \"friendstatus\",\r\n            data: {\r\n                withAdmin: allUsers\r\n            }\r\n        })\r\n\r\n        this._userData.next({ ...this._userData.value, friends: newFriends })\r\n    }\r\n\r\n    update(arg0: { [att in keyof UserData]?: UserData[att] }) {\r\n        let userData = { ...this._userData.value };\r\n        for (let i in arg0) {\r\n            userData[i] = arg0[i]\r\n        }\r\n        this._userData.next(userData)\r\n        this.apiService.passThrough({\r\n            type: \"userUpdate\",\r\n            data: userData\r\n        })\r\n    }\r\n\r\n\r\n\r\n}\r\n","import { Route } from '@angular/router';\r\nimport { FriendsComponent } from './friends/friends.component';\r\nimport { MiroComponent } from './miro/miro.component';\r\n\r\nexport const routes: Array<Route> = [{\r\n    path: 'friends',\r\n    component: FriendsComponent\r\n}, {\r\n    path: \"miro\",\r\n    component: MiroComponent\r\n}];\r\n","export class Vector {\r\n\r\n    constructor(public x: number, public y: number) { }\r\n\r\n    clone() {\r\n        const newVector: this = Object.create(this);\r\n        Object.assign(newVector, this);\r\n        return newVector;\r\n    }\r\n    dividedBy(divisor: number): this {\r\n        const newVector: this = this.clone();\r\n        newVector.x = this.x / divisor;\r\n        newVector.y = this.y / divisor;\r\n        return newVector;\r\n    }\r\n    multipliedBy(divisor: number): this {\r\n        const newVector: this = this.clone();\r\n        newVector.x = this.x * divisor;\r\n        newVector.y = this.y * divisor;\r\n        return newVector;\r\n    }\r\n    rounded() {\r\n        const newVector: this = this.clone();\r\n        newVector.x = Math.round(this.x);\r\n        newVector.y = Math.round(this.y);\r\n        return newVector;\r\n    }\r\n    subtract(x_Vector: Vector | number, y?: number) {\r\n        let addX: number;\r\n        let addY: number;\r\n\r\n        if (x_Vector instanceof Vector) {\r\n            const loc = x_Vector as Vector;\r\n            addX = loc.x;\r\n            addY = loc.y;\r\n        } else {\r\n            const amount = x_Vector as number;\r\n            addX = amount;\r\n            addY = y | amount;\r\n        }\r\n        const newVector: this = this.clone();\r\n        newVector.x = this.x - addX;\r\n        newVector.y = this.y - addY;\r\n        return newVector;\r\n    }\r\n    floored(lat = true, lon = true) {\r\n        const newVector: this = this.clone();\r\n        if (lat) {\r\n            newVector.x = Math.floor(this.x);\r\n        }\r\n        if (lon) {\r\n            newVector.y = Math.floor(this.y);\r\n        }\r\n        return newVector;\r\n    }\r\n\r\n    added(pixel: Vector | number, amountLat?: number): this {\r\n        let addX: number;\r\n        let addY: number;\r\n\r\n        if (pixel instanceof Vector) {\r\n            const loc = pixel as Vector;\r\n            addX = loc.x;\r\n            addY = loc.y;\r\n        } else {\r\n            const amount = pixel as number;\r\n            addX = amount;\r\n            addY = amountLat | amount;\r\n        }\r\n        const newVector: this = this.clone();\r\n        newVector.x = this.x + addX;\r\n        newVector.y = this.y + addY;\r\n        return newVector;\r\n    }\r\n    equals(startPoint: Vector): boolean {\r\n        return startPoint.x === this.x && startPoint.y === this.y;\r\n    }\r\n\r\n    limit(max: number) {\r\n        const newVector: this = this.clone();\r\n        newVector.x = Math.min(this.x, max);\r\n        newVector.y = Math.min(this.y, max);\r\n        return newVector;\r\n    }\r\n\r\n    atLeast(min: number | Vector): Vector {\r\n        const newVector: this = this.clone();\r\n\r\n        let minX: number;\r\n        let minY: number\r\n\r\n        if (min instanceof Vector) {\r\n            minY = min.y\r\n            minX = min.x\r\n        } else {\r\n            minX = min\r\n            minY = min\r\n        }\r\n\r\n        newVector.x = Math.max(this.x, minX);\r\n        newVector.y = Math.max(this.y, minY);\r\n        return newVector;\r\n    }\r\n\r\n\r\n    length(): number {\r\n        return Math.sqrt((this.x * this.x) + (this.y * this.y))\r\n    }\r\n\r\n\r\n    scaleTo(length) {\r\n        return this.dividedBy(this.length()).multipliedBy(length)\r\n    }\r\n    toString() {\r\n        return `{\"lat\":${this.x},\"lon\":${this.y}}`;\r\n    }\r\n}","import { ChangeDetectorRef, Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { combineLatest, Observable } from 'rxjs';\nimport { distinctUntilChanged, filter, groupBy, map, mergeAll, take } from 'rxjs/internal/operators';\n\nimport { environment } from '../environments/environment';\nimport { Vector } from '../vector';\nimport { ApiService } from './api-service';\nimport { GameState, UnPromise, UserData } from './backend';\nimport { SharedService } from './shared-service';\nimport { SpeechRecognitionService } from './speech-recognition-service';\nimport { WAMAp } from './waapi';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.less']\n})\nexport class AppComponent {\n  title = 'mapoverlay';\n\n  userData$: Observable<UserData>;\n\n  _autoOpenOverlay: boolean = false\n  fPressed: Observable<boolean>;\n\n  gameState$: Observable<GameState>\n\n\n  isPrivateMap$: Observable<\"other\" | \"private\">\n\n  get autoOpenOverlay() {\n    return this._autoOpenOverlay\n  }\n\n  set autoOpenOverlay(value: boolean) {\n    this._autoOpenOverlay = value;\n    this.apiService.passThrough({\n      type: \"userUpdate\",\n      data: {\n        autoOpenGameOverlay: value\n      }\n    })\n  }\n\n  debug(val: unknown) {\n    debugger;\n    console.log(val)\n    return val\n  }\n\n  constructor(private apiService: ApiService, private sharedService: SharedService,\n    private cdr: ChangeDetectorRef,\n    private speechRecognition: SpeechRecognitionService,\n    private router: Router) {\n\n    this.fPressed = apiService.passedEvents.pipe(\n      groupBy(e => e.code),\n      map(group => group.pipe(distinctUntilChanged(null, e => e.type))),\n      mergeAll(),\n      filter(ev => ev.type == \"keydown\" || ev.type == \"keyup\"),\n      filter(ev => ev.code == \"KeyF\"),\n      map(ev => ev.type == \"keydown\")\n    )\n    this.fPressed.subscribe(e => {\n      if (e) {\n        this.router.navigate([\"friends\"])\n      } else {\n        if (this.router.url == \"/friends\") {\n          this.router.navigateByUrl(\"/\")\n        }\n      }\n    })\n\n    this.userData$ = sharedService.userData\n\n    this.gameState$ = sharedService.gameState$\n\n    this.userData$.subscribe(data => {\n      if (data) {\n        this._autoOpenOverlay = data.autoOpenGameOverlay\n        this.cdr.detectChanges()\n      }\n    })\n    speechRecognition.start();\n\n    this.isPrivateMap$ = combineLatest([this.userData$, this.gameState$]).pipe(\n      filter(([userData, gameState]) => !!userData && !!gameState),\n      map(([userData, gameState]) => {\n        return gameState.roomId.includes(userData.referenceUuid) ? \"private\" : \"other\"\n      })\n    )\n\n    combineLatest([this.apiService.userPositions, this.userData$])\n      .subscribe(async ([positions, userData]) => {\n        const gameState = await this.apiService.WAApi(\"getGameState\")\n        const playerInScreen = new Vector(window.innerWidth, window.innerHeight)\n          .multipliedBy(devicePixelRatio)\n          .subtract(\n            new Vector(window.outerWidth, window.outerHeight)\n              .dividedBy(2))\n          .dividedBy(devicePixelRatio)\n          .floored()\n        const playerVector = this.getVectorForPlayer(gameState, gameState.nickName)\n\n        document.getElementById(\"direction-sign-container\").innerHTML = ''\n        for (let user of positions) {\n          const userRefId = user.userRefereneUuid\n          if (userRefId !== userData.referenceUuid) {\n            if (user.userRefereneUuid == userData.trackedUser) {\n\n              const otherPlayerVector = new Vector(user.position.x, user.position.y)\n              //if (!this.directionSignMap[pusherId]) {\n              const compassIcon = document.createElement(\"div\")\n              compassIcon.style.position = \"fixed\"\n              compassIcon.style.backgroundColor = \"red\"\n              compassIcon.style.width = \"10px\";\n              compassIcon.style.height = \"10px\";\n              document.getElementById(\"direction-sign-container\").appendChild(compassIcon)\n              // }\n              const userToPlayer = otherPlayerVector.subtract(playerVector);\n              if (userToPlayer.length() < 300) {\n                compassIcon.remove()\n                //  delete this.directionSignMap[pusherId]\n              }\n              const directionPos = playerInScreen.added(\n                userToPlayer.scaleTo(400).added(0, 60)\n              )\n\n              compassIcon.style.left = directionPos.x + \"px\"\n              compassIcon.style.top = directionPos.y + \"px\"\n            }\n\n\n          }\n        }\n      })\n\n\n    window.addEventListener(\"click\", e => {\n      window.parent.focus();\n    })\n  }\n\n  async goBackToPreviousMap() {\n    const userData = await this.userData$.pipe(take(1)).toPromise()\n    this.apiService.WAApi(\"goToRoom\", `/${userData.attributes.previousMap}`)\n  }\n\n  async gotoPrivateMap() {\n    try {\n      const [gameState, { referenceUuid }] = await Promise.all([\n        this.gameState$.pipe(take(1)).toPromise(),\n        this.userData$.pipe(take(1)).toPromise(),\n      ])\n      await this.apiService.passThrough({\n        type: \"setAttribute\",\n        data: {\n          key: \"previousMap\",\n          value: gameState.roomId\n        }\n      })\n      this.apiService.WAApi(\"goToRoom\", `/_/global/${environment.mapServerOrigin}/mapserver/rest/mapserver/usermap/${referenceUuid}.json`)\n    } catch (e) {\n      console.error(e)\n    }\n  }\n  getVectorForPlayer(gameState: UnPromise<ReturnType<WAMAp[\"getGameState\"]>>, playerName: string) {\n    const playerPos = gameState.players[playerName].position;\n    return new Vector(playerPos.x, playerPos.y)\n  }\n\n\n  blur() {\n    window.parent.focus()\n  }\n  openMiro() {\n    this.apiService.WAApi('openCoWebSite', './pages/miro.html')\n  }\n}\n","<!-- <a routerLink=\"friends\">freinds</a>    (click)=\"openMiro()\" -->\n<ng-container *ngIf=\"userData$|async;let userData\">\n        <mat-checkbox [(ngModel)]=\"autoOpenOverlay\"\n                      *ngIf=\"userData\">Automatically Open the overlay on visist</mat-checkbox> <br>\n\n        <button mat-button\n                routerLink=\"friends\"\n                (click)=\"blur()\">Friends</button>\n\n        <button mat-button\n                routerLink=\"miro\">open miro</button>\n\n        <ng-container *ngIf=\"(isPrivateMap$|async);let isPrivateMap\">\n                <button mat-button\n                        *ngIf=\"isPrivateMap=='other';else back\"\n                        (click)=\"gotoPrivateMap()\">private map</button>\n                <ng-template #back>\n                        <button mat-button\n                                (click)=\"goBackToPreviousMap()\">back</button>\n                </ng-template>\n        </ng-container>\n\n\n\n        <br>\n        <router-outlet></router-outlet>\n\n        <div id=\"direction-sign-container\"></div>\n\n        <app-health></app-health>\n        <app-inventar [inventory]=\"userData.inventory\"></app-inventar>\n</ng-container>","import { InventoryItemType } from '../../../../../../../../workadventure-mapserver/resources/mapserver/user/inventory/inventory-item-type';\r\n\r\n\r\nexport { InventoryItemType };\r\nexport type ImageMap = Record<InventoryItemType, {\r\n    image: string\r\n    title: string,\r\n    activationText: string,\r\n}>;\r\n\r\nexport const inventoryTypeMap: ImageMap = {\r\n    [InventoryItemType.Random]: {\r\n        image: 'help',\r\n        title: 'a random item that will do something at some point',\r\n        activationText: 'roll for item',\r\n\r\n    },\r\n    [InventoryItemType.Tile]: {\r\n        image: '{}',\r\n        title: 'a tile',\r\n        activationText: 'place at player',\r\n\r\n    }\r\n\r\n};","import { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatListModule } from '@angular/material/list';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { RouterModule } from '@angular/router';\nimport { NgCircleProgressModule } from 'ng-circle-progress';\nimport { ApiService } from './api-service';\nimport { AppComponent } from './app.component';\nimport { routes } from './app.routes';\nimport { FriendsComponent } from './friends/friends.component';\nimport { HealthComponent } from './health/health.component';\nimport { InventarComponent } from './inventar/inventar.component';\nimport { MiroComponent } from './miro/miro.component';\nimport { SharedService } from './shared-service';\nimport { SpeechRecognitionService } from './speech-recognition-service';\n\n@NgModule({\n  imports: [\n    BrowserModule, RouterModule.forRoot(routes), NgCircleProgressModule.forRoot(), MatDialogModule,\n    MatButtonModule, MatCheckboxModule, FormsModule,\n    MatListModule, BrowserAnimationsModule\n  ],\n  declarations: [\n    AppComponent, FriendsComponent,\n    HealthComponent,\n    MiroComponent,\n    InventarComponent\n  ],\n  providers: [ApiService, SharedService, SpeechRecognitionService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-miro',\n  templateUrl: './miro.component.html',\n  styleUrls: ['./miro.component.less']\n})\nexport class MiroComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<div>\n  <iframe width=\"100%\"\n          height=\"100%\"\n          src=\"https://miro.com/app/live-embed/o9J_lIWrP_o=/?moveToViewport=-1319,-576,1877,916\"\n          frameBorder=\"0\"\n          scrolling=\"no\"\n          allowFullScreen>\n  </iframe>\n</div>","\r\n\r\ninterface CustomVEctor {\r\n    x: number; y: number;\r\n}\r\nfunction isCustomVector(obj): obj is CustomVEctor {\r\n    return typeof obj !== 'number' && 'x' in obj && 'y' in obj;\r\n}\r\n\r\nexport class Vector2 {\r\n\r\n\r\n    constructor(x: number | MouseEvent | CustomVEctor, y?: number) {\r\n        if (x instanceof MouseEvent) {\r\n            this.y = x.offsetY;\r\n            this.x = x.offsetX;\r\n        } else if (isCustomVector(x)) {\r\n            this.x = x.x;\r\n            this.y = x.y;\r\n        } else {\r\n            this.x = x;\r\n            this.y = y;\r\n        }\r\n    }\r\n\r\n    static ZERO = new Vector2(0, 0);\r\n\r\n    readonly x: number;\r\n    readonly y: number;\r\n    limit(arg0: Vector2): Vector2 {\r\n        return new Vector2(Math.min(this.x, arg0.x), Math.min(this.y, arg0.y));\r\n    }\r\n\r\n    round(): Vector2 {\r\n        return new Vector2(Math.round(this.x - 0.5), Math.round(this.y - 0.5));\r\n    }\r\n\r\n    add(direction: Vector2) {\r\n        return new Vector2(this.x + direction.x, this.y + direction.y);\r\n    }\r\n\r\n    addX(x: number): Vector2 {\r\n        return new Vector2(this.x + x, this.y);\r\n    }\r\n\r\n    sub(direction: Vector2) {\r\n        return new Vector2(this.x - direction.x, this.y - direction.y);\r\n    }\r\n\r\n    magnitude() {\r\n        return Math.sqrt(this.lengthSqr());\r\n    }\r\n\r\n    div(divisor: number | Vector2) {\r\n        if (divisor instanceof Vector2) {\r\n            return new Vector2(this.x / divisor.x, this.y / divisor.y);\r\n        }\r\n        return new Vector2(this.x / divisor, this.y / divisor);\r\n    }\r\n\r\n    mult(multiplicator: number) {\r\n        return new Vector2(this.x * multiplicator, this.y * multiplicator);\r\n    }\r\n\r\n\r\n    dot(vector2: Vector2) {\r\n        return this.x * vector2.x + this.y * vector2.y;\r\n    }\r\n\r\n    lengthSqr() {\r\n        return (this.x * this.x) + (this.y * this.y);\r\n    }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-health',\n  templateUrl: './health.component.html',\n  styleUrls: ['./health.component.less']\n})\nexport class HealthComponent implements OnInit {\n\n\n  health: number = 10\n  maxHealth: number = 100\n\n\n  get percent() {\n    return this.health / this.maxHealth\n  }\n\n\n  get healthColor() {\n    const percent = this.percent\n\n    if (percent < 0.2) {\n      return \"red\"\n    }\n\n    return \"#78C000\"\n  }\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<circle-progress [percent]=\"percent*100\"\n                 [radius]=\"80\"\n                 [outerStrokeWidth]=\"16\"\n                 titleFontSize=40\n                 titleColor=black\n                 [showSubtitle]=\"false\"\n                 [showUnits]=\"true\"\n                 [showInnerStroke]=\"true\"\n                 unitsFontSize=26\n                 [innerStrokeWidth]=\"4\"\n                 [outerStrokeColor]=\"healthColor\"\n                 [showBackground]=\"false\"\n                 [innerStrokeColor]=\"'#C7E596'\"\n                 [animation]=\"true\"\n                 [animationDuration]=\"300\">\n</circle-progress>","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"],"sourceRoot":"webpack:///"}